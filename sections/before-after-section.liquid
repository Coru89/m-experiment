<script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"> </script>
{{ '//cdnjs.cloudflare.com/ajax/libs/mhayes-twentytwenty/1.0.0/js/jquery.twentytwenty.min.js' | script_tag }}
{{ '//cdnjs.cloudflare.com/ajax/libs/mhayes-twentytwenty/1.0.0/js/jquery.event.move.min.js' | script_tag }}
{{ '//cdnjs.cloudflare.com/ajax/libs/mhayes-twentytwenty/1.0.0/css/twentytwenty.min.css'| stylesheet_tag }}

<script>$(function($){$('.twentytwenty-container').twentytwenty();});</script>

{% style%}
    .before-after-section .h2{
        color: #fff;
        text-align: center;
        padding-top: 40px;
    }
    .twentytwenty-overlay {
        display:none
    }

    #shopify-section-{{ section.id }} .container {
        display: flex;
        height: 100%;

        {% if section.settings.overlay_content_position == "top-left" %}
            align-items: flex-start;
            justify-content: flex-start;
        {% elsif section.settings.overlay_content_position == "bottom-left" %}
            align-items: flex-end;
        {% elsif section.settings.overlay_content_position == "top-middle" %}
            justify-content: center;
            
        {% elsif section.settings.overlay_content_position == "bottom-middle" %}
            align-items: flex-end;
            justify-content: center;

        {% elsif section.settings.overlay_content_position == "top-right" %}
            justify-content: flex-end;

        {% elsif section.settings.overlay_content_position == "bottom-right" %}
            align-items: flex-end;
            justify-content: flex-end;
        {% endif %}
    }

    .before-after-images-container{
        position: relative;
    }

    .before-after-images-container .twentytwenty-container{
        width: 100%;
    }

    .before-after-images-container .twentytwenty-container img{
        min-width: 100%;
        min-height: 300px;
    }

    .before-after-images-container .mobile-content {
        color: #fff;
        padding: 30px;
    }

    @media screen and (min-width: 1000px) {
        .before-after-images-container .mobile-content {
            display: none;
        }
    }

    .before-after-images-container .overlay-content {
        display: none;
        position: relative;
        padding: 30px;
        z-index: 39;
        color: #fff;
    }

    @media screen and (min-width: 1000px) {
       .before-after-images-container .overlay-content{
         display: block;
         max-width: 40%;
         padding: 50px;
       }
    }

    .before-after-images-container .overlay-content *,
    .before-after-images-container .mobile-content * {
        color: #fff;
    }

    .before-after-images-container .overlay-content .heading{
        margin-bottom: 15px;
    }

    .before-after-images-container .overlay-content p{
        font-weight: 400;
        line-height: 20px;
    }
{% endstyle %}

{%- if section.settings.header != null and section.settings.header != "" -%}
    <h3 class="heading h2">{{ section.settings.header }}</h3>
{%- endif -%}

<div class="before-after-images-container">
    
	<div class='twentytwenty-container {{ section.id }}'>
        <img src='{{ section.settings.imagebefore_desktop | img_url: '1920x' }}' />
    	<img src='{{ section.settings.imageafter_desktop | img_url: '1920x' }}' />
        
        <div class="container">
            <div class="overlay-content">
                <div class="text-container">
                    <h4 class="heading h3">{{section.settings.subheading}}</h4>
                    {{section.settings.caption}}
                </div>

            </div>
        </div>

	</div>

    <div class="mobile-content">
        <h4 class="heading h3">{{section.settings.subheading}}</h4>
        {{section.settings.caption}}
    </div>
    
</div>

{% schema %}
  {
    "name": "Before After Image Slider",
    "class": "before-after-section",
    "settings": [
    {
        "type": "text",
        "id": "header",
        "label": "Section Title"
    },
    {
        "type":"header",
        "content": "Content On Image"
    },
    {
        "type": "text",
        "id": "subheading",
        "default": "Subheading",
        "label": "Subheading"
    },
    {
        "type": "richtext",
        "id": "caption",
        "default": "<p>Caption</p>",
        "label": "Caption"
    },
    {
        "type": "select",
        "id": "overlay_content_position",
        "label":"Content Position",
        "options": [
          {
            "value": "top-left",
            "label": "Top left"
          },
          {
            "value": "top-center",
            "label": "Top center"
          },
          {
            "value": "top-right",
            "label": "Top right"
          },
          {
            "value": "middle-left",
            "label": "Middle left"
          },
          {
            "value": "middle-center",
            "label": "Middle center"
          },
          {
            "value": "middle-right",
            "label": "Middle right"
          },
          {
            "value": "bottom-left",
            "label": "Bottom left"
          },
          {
            "value": "bottom-center",
            "label": "Bottom center"
          },
          {
            "value": "bottom-right",
            "label": "Bottom right"
          }
        ],
        "default": "middle-center"
    },
    {
        "type":"header",
        "content":"Desktop Images"
    },
    {
        "type": "image_picker",
        "id": "imagebefore_desktop",
        "label": "Image Before"
    },
    {
        "type": "image_picker",
        "id": "imageafter_desktop",
        "label": "Image After"
    },
    {
        "type":"header",
        "content":"Mobile Images"
    },
    {
        "type": "image_picker",
        "id": "imagebefore_mobile",
        "label": "Image Before"
    },
    {
        "type": "image_picker",
        "id": "imageafter_mobile",
        "label": "Image After"
    }

],

"presets": [
    {
      "name": "Before After Image Slider"
    }
  ]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
